(this.webpackJsonpghibliapireact=this.webpackJsonpghibliapireact||[]).push([[0],{37:function(e,t,i){},47:function(e,t,i){"use strict";i.r(t);var n=i(0),r=i(1),c=i.n(r),o=i(13),s=i.n(o),a=i(7),d=i(2),l=i(16),h=i(10),u=i(24),j=i(25),p="CHANGE_SEARCHFIELD",b="MODAL_OPEN",O="MODAL_CLOSE",v="MODAL_SET_VIDEO",f="REQUEST_MOVIES_PENDING",m="REQUEST_MOVIES_SUCCESS",g="REQUEST_MOVIES_FAILED",x="REQUEST_MOVIE_PENDING",y="REQUEST_MOVIE_SUCCESS",_="REQUEST_MOVIE_FAILED",E={searchField:""},w={movies:[],isPending:!0},S={movie:{},isPending:!0},M={isOpen:!1,videoID:""},C=(i(37),i(8)),D=i(9),I=i(12),k=i(11),P=i(19),N=i.n(P),T=i(26),V=function(e){return new Promise((function(t,i){var n=new Image;n.addEventListener("load",(function(){return t(n)})),n.addEventListener("error",(function(e){return i(e)})),n.src="https://img.youtube.com/vi/"+e+"/mqdefault.jpg"}))};function L(e){return 120!==e}function R(){return(R=Object(T.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",V(t).then((function(e){return L(e.width)})).then((function(e){return e})).catch((function(e){return console.log(e)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var q=i.p+"static/media/logo.a4d05b32.png",A=function(e){Object(I.a)(i,e);var t=Object(k.a)(i);function i(e){var n;return Object(C.a)(this,i),(n=t.call(this,e)).state={hasVideo:!1},n}return Object(D.a)(i,[{key:"componentDidMount",value:function(){var e=this;(function(e){return R.apply(this,arguments)})(this.props.video_id).then((function(t){e.setState({hasVideo:t})}))}},{key:"render",value:function(){return 0!==this.props.video_id.length&&this.state.hasVideo?Object(n.jsx)(c.a.Fragment,{children:Object(n.jsx)("a",{href:"https://youtu.be/".concat(this.props.video_id),onClick:this.props.onShowVideo,children:Object(n.jsx)("img",{alt:"".concat(this.props.title," Trailer Preview"),id:this.props.video_id,src:"https://img.youtube.com/vi/".concat(this.props.video_id,"/hqdefault.jpg")})})}):Object(n.jsx)("img",{src:q,alt:"Studio Ghibli Logo"})}}]),i}(r.Component),F=function(e){var t=e.id,i=e.release_date,r=e.title,c=e.description,o=e.producer,s=e.director,d=e.video_id,l=e.onShowVideo;return Object(n.jsxs)("div",{className:"card",children:[Object(n.jsx)(A,{video_id:d,title:r,onShowVideo:l}),Object(n.jsxs)("div",{children:[Object(n.jsx)("h2",{children:r}),Object(n.jsx)("p",{children:c}),Object(n.jsxs)("dl",{className:"mtb-20 pd-40",children:[Object(n.jsx)("dt",{children:"Release Date"}),Object(n.jsx)("dd",{children:i}),Object(n.jsx)("dt",{children:"Producer"}),Object(n.jsx)("dd",{children:o}),Object(n.jsx)("dt",{children:"Director"}),Object(n.jsx)("dd",{children:s})]}),Object(n.jsx)(a.b,{className:"myButton",to:"movie/".concat(t),children:"See more"})]})]})};function G(e,t){return e.filter((function(e){return-1!==e.movie_name.toLowerCase().indexOf(t.toLowerCase())}))}var U=function(e){var t=e.films,i=e.videos,r=e.onShowVideo;return Object(n.jsx)("div",{className:"container",children:t.map((function(e,t){var c="";return G(i,e.title).length&&(c=G(i,e.title)[0].movie_youtube_key),Object(n.jsx)(F,{id:e.id,title:e.title,description:e.description,release_date:e.release_date,director:e.director,producer:e.producer,video_id:c,onShowVideo:r},t)}))})},Q=function(e){var t=e.searchChange;return Object(n.jsx)("div",{className:"search",children:Object(n.jsx)("div",{children:Object(n.jsx)("input",{type:"search",placeholder:"Search Films by Title ... ",required:!0,onChange:t})})})},B=function(){return Object(n.jsxs)("footer",{children:[Object(n.jsxs)("p",{children:["This project lives at the GitHub repository ",Object(n.jsx)("a",{href:"https://github.com/elisavetTriant/ghibliapireact",children:"https://github.com/elisavetTriant/ghibliapireact"})," and is licenced under the ",Object(n.jsx)("a",{href:"https://github.com/elisavetTriant/ghibliapireact/blob/main/LICENSE",children:"MIT licence"}),"."]}),Object(n.jsxs)("p",{children:["It was bootstrapped with ",Object(n.jsx)("a",{href:"https://github.com/facebook/create-react-app",children:"Create React App"})," as a playground to create something fun with React while pulling data from different sources like the ",Object(n.jsx)("a",{href:"https://github.com/janaipakos/ghibliapi",children:"Unofficial Ghibli API"}),", the ",Object(n.jsx)("a",{href:"https://github.com/elisavetTriant/ghibli-movies-api",children:"Unofficial Ghibli Youtube Videos API"})," and Youtube. "]}),Object(n.jsxs)("p",{children:["It's heavily inspired from the ",Object(n.jsx)("a",{href:"https://github.com/aneagoie/robofriends",children:"Robofriends App"}),' which is part of the Udemy Course "The Complete Web Developer in 2021: Zero to Mastery" by ',Object(n.jsx)("a",{href:"https://github.com/aneagoie/",children:"@aneagoie"}),". Thanks Andrei! "]}),Object(n.jsxs)("p",{children:["It also takes some hints from the ",Object(n.jsx)("a",{href:"https://github.com/taniarascia/sandbox/tree/master/ghibli",children:"tutorial and code"})," of Tania Rascia's implementation in vanilla Javascript."]}),Object(n.jsxs)("p",{children:["If you spot any bugs, would like to show me how to make better, or just say hi, contact me at ",Object(n.jsx)("a",{href:"https://elissavet.me",children:"elissavet.me"}),". Thank you!"]})]})},H=i(28),J=i.n(H),W=function(e){var t=e.video_id,i=e.is_open,r=e.onClose;return Object(n.jsx)(J.a,{channel:"youtube",isOpen:i,videoId:t,onClose:r})},Y=function(e){return function(t){t({type:x}),fetch("https://ghibliapi.herokuapp.com/films/"+e).then((function(e){return e.json()})).then((function(e){var i=e.title,n="";fetch("https://ghibli-sample-api.herokuapp.com/api/movies/"+i).then((function(e){return e.json()})).then((function(e){n=e.movie_youtube_key})).catch((function(e){return console.log(e)}));var r={},c=e.locations[0],o=e.people[0];(function(e,t,i,n){var r=[];return r[0]=fetch(e).then((function(e){return e.json()})).catch((function(e){return console.log(e)})),r[1]=fetch(t).then((function(e){return e.json()})).catch((function(e){return console.log(e)})),r[2]=fetch(i).then((function(e){return e.json()})).catch((function(e){return console.log(e)})),r[3]=fetch(n).then((function(e){return e.json()})).catch((function(e){return console.log(e)})),Promise.all(r)})(c,e.species[0],e.vehicles[0],o).then((function(i){Object.assign(r,{locations:i[0]}),Object.assign(r,{species:i[1]}),Object.assign(r,{vehicles:i[2]}),Object.assign(r,{people:i[3]}),t({type:y,payload:Object.assign({},e,{video:n},{relatedData:r})})})).catch((function(e){return t({type:_,payload:e})}))})).catch((function(e){return t({type:_,payload:e})}))}},z=function(e){Object(I.a)(i,e);var t=Object(k.a)(i);function i(){var e;Object(C.a)(this,i);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).onShowVideo=function(t){t.preventDefault(),e.props.setVideoID(t),e.props.openModal()},e}return Object(D.a)(i,[{key:"componentDidMount",value:function(){this.props.onRequestMovies()}},{key:"render",value:function(){var e=this.props,t=e.movies,i=e.isPending,r=e.searchField,c=e.onSearchChange,o=e.videoID,s=[];return i||(s=t.movies.filter((function(e){return e.title.toLowerCase().includes(r.toLowerCase())}))),i?Object(n.jsx)("h1",{children:"Loading"}):Object(n.jsxs)("div",{children:[Object(n.jsx)("img",{src:q,className:"app-logo",alt:"Studio Ghibli Logo"}),Object(n.jsx)("h1",{children:"Studio Ghibli Films"}),Object(n.jsx)(Q,{searchChange:c}),Object(n.jsx)(U,{films:s,videos:t.relatedVideos,onShowVideo:this.onShowVideo}),Object(n.jsx)(B,{}),Object(n.jsx)(W,{video_id:o,is_open:this.props.isOpen,onClose:this.props.closeModal})]})}}]),i}(r.Component),Z=Object(h.b)((function(e){return{searchField:e.searchMovies.searchField,movies:e.requestMovies.movies,isPending:e.requestMovies.isPending,videoID:e.assignModal.videoID,isOpen:e.assignModal.isOpen}}),(function(e){return{onSearchChange:function(t){return e((i=t.target.value,{type:p,payload:i}));var i},onRequestMovies:function(){return e((function(e){e({type:f}),fetch("https://ghibliapi.herokuapp.com/films").then((function(e){return e.json()})).then((function(t){fetch("https://ghibli-sample-api.herokuapp.com/api/movies").then((function(e){return e.json()})).then((function(i){return e({type:m,payload:Object.assign({},{movies:t},{relatedVideos:i})})})).catch((function(t){return e({type:g,payload:t})}))})).catch((function(t){return e({type:g,payload:t})}))}))},closeModal:function(){return e({type:O})},openModal:function(){return e({type:b})},setVideoID:function(t){return e((i=t.target.id,{type:v,payload:i}));var i}}}))(z),K=function(e){var t=e.video_id;return Object(n.jsx)("div",{className:"video",style:{position:"relative",paddingBottom:"56.25%",paddingTop:25,height:0},children:Object(n.jsx)("iframe",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},src:"https://www.youtube.com/embed/".concat(t),frameBorder:"0",allowFullScreen:!0,title:t})})},X=function(e){var t=e.name,i=e.gender,r=e.eye_color,c=e.hair_color;return Object(n.jsx)("div",{className:"card pd-20",children:Object(n.jsxs)("div",{children:[Object(n.jsx)("h3",{children:t}),Object(n.jsxs)("dl",{children:[Object(n.jsx)("dt",{children:"Gender"}),Object(n.jsx)("dd",{children:i}),Object(n.jsx)("dt",{children:"Eye Color"}),Object(n.jsx)("dd",{children:r}),Object(n.jsx)("dt",{children:"Hair Color"}),Object(n.jsx)("dd",{children:c})]})]})})},$=function(e,t){var i=[];return e.forEach((function(e){e.films.forEach((function(n){n===t&&i.push(e)}))})),console.log(i),i},ee=function(e){Object(I.a)(i,e);var t=Object(k.a)(i);function i(){return Object(C.a)(this,i),t.apply(this,arguments)}return Object(D.a)(i,[{key:"componentDidMount",value:function(){var e=this.props.match.params.id;this.props.onRequestMovie(e)}},{key:"componentDidUpdate",value:function(e){e.isPending!==this.props.isPending&&(this.props.isPending||this.props.movie.relatedData.people.length>0&&console.log("We have people"))}},{key:"render",value:function(){var e=this.props,t=e.movie,i=e.isPending,r=t.release_date,c=t.title,o=t.original_title,s=t.original_title_romanised,d=t.running_time,l=t.description,h=t.producer,u=t.director,j=t.rt_score,p=t.url,b=t.video;return i?Object(n.jsx)("h1",{children:"Loading"}):Object(n.jsxs)("div",{children:[Object(n.jsx)(a.b,{to:"/",children:Object(n.jsx)("img",{src:q,className:"app-logo",alt:"Studio Ghibli Logo"})}),Object(n.jsx)("h1",{children:c}),b?Object(n.jsx)(K,{video_id:b}):"",Object(n.jsxs)("div",{className:"container mtb-20",children:[Object(n.jsxs)("div",{className:"card pd-20",children:[Object(n.jsx)("h2",{children:"Description"}),l]}),Object(n.jsxs)("div",{className:"card pd-20",children:[Object(n.jsx)("h2",{children:"General Information"}),Object(n.jsxs)("dl",{children:[Object(n.jsx)("dt",{children:"Original Title"}),Object(n.jsx)("dd",{children:o}),Object(n.jsx)("dt",{children:"Original Title Romanized"}),Object(n.jsx)("dd",{children:s}),Object(n.jsx)("dt",{children:"Release Date"}),Object(n.jsx)("dd",{children:r}),Object(n.jsx)("dt",{children:"Producer"}),Object(n.jsx)("dd",{children:h}),Object(n.jsx)("dt",{children:"Director"}),Object(n.jsx)("dd",{children:u}),Object(n.jsx)("dt",{children:"Running time (minutes)"}),Object(n.jsx)("dd",{children:d}),Object(n.jsx)("dt",{children:"Rotten Tomato score"}),Object(n.jsx)("dd",{children:j})]})]})]}),this.props.movie.relatedData.people.length>0?Object(n.jsx)("div",{className:"container mtb-20",children:Object(n.jsxs)("div",{className:"card pd-20",children:[Object(n.jsx)("h2",{children:"Listed Characters"}),$(this.props.movie.relatedData.people,p).map((function(e,t){return Object(n.jsx)(X,{id:e.id,name:e.name,gender:e.gender,eye_color:e.eye_color,hair_color:e.hair_color,species:e.species},t)}))]})}):null,Object(n.jsx)("div",{className:"containerCenter mtb-20",children:Object(n.jsx)(a.b,{className:"button_link",to:"/",children:"Back"})}),Object(n.jsx)(B,{})]})}}]),i}(r.Component),te=Object(h.b)((function(e){return{movie:e.requestMovie.movie,isPending:e.requestMovie.isPending}}),(function(e){return{onRequestMovie:function(t){return e(Y(t))}}}))(ee),ie=Object(j.createLogger)(),ne=Object(l.b)({requestMovies:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case f:return Object.assign({},e,{isPending:!0});case m:return Object.assign({},e,{movies:t.payload,isPending:!1});case g:return Object.assign({},e,{error:t.payload});default:return e}},requestMovie:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case x:return Object.assign({},e,{isPending:!0});case y:return Object.assign({},e,{movie:t.payload,isPending:!1});case _:return Object.assign({},e,{error:t.payload});default:return e}},searchMovies:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case p:return Object.assign({},e,{searchField:t.payload});default:return e}},assignModal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case b:return Object.assign({},e,{isOpen:!0});case O:return Object.assign({},e,{isOpen:!1});case v:return Object.assign({},e,{videoID:t.payload});default:return e}}}),re=Object(l.c)(ne,Object(l.a)(u.a,ie));s.a.render(Object(n.jsx)(h.a,{store:re,children:Object(n.jsx)(a.a,{children:Object(n.jsxs)(d.c,{children:[Object(n.jsx)(d.a,{exact:!0,path:"/",component:Z}),Object(n.jsx)(d.a,{path:"/movie/:id",component:te})]})})}),document.getElementById("root"))}},[[47,1,2]]]);
//# sourceMappingURL=main.6ecaa7a9.chunk.js.map